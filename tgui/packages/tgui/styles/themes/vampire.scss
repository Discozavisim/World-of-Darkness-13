/**
 * Vampire The Masquerade Theme
 */

@use 'sass:color';
@use 'sass:meta';

@use '~tgui/styles/colors.scss' with (
  $primary: hsl(0, 65%, 25%),
  $average: hsl(15, 75%, 35%),
  $bad: hsl(340, 85%, 35%),
  $label: hsl(0, 15%, 70%),
  $fg-map-keys: (),
  $bg-map-keys: ()
);
@use '~tgui/styles/base.scss' with (
  $color-bg: hsl(0, 20%, 8%),
  $color-bg-grad-spread: 8%
);

.theme-vampire {
  // Atomic classes
  @include meta.load-css('~tgui/styles/atomic/color.scss');

  // Components
  @include meta.load-css(
    '~tgui-core/styles/components/Button.scss',
    $with: (
      'color-default': hsl(0, 45%, 20%),
      'color-disabled': hsl(0, 10%, 25%),
      'color-selected': hsl(0, 75%, 30%),
      'color-caution': hsl(45, 80%, 35%),
      'color-danger': hsl(15, 85%, 40%)
    )
  );
  @include meta.load-css(
    '~tgui-core/styles/components/Dimmer',
    $with: ('background-dimness': 0.6)
  );
  @include meta.load-css(
    '~tgui-core/styles/components/Input.scss',
    $with: ('border-color': hsl(0, 45%, 25%))
  );
  @include meta.load-css('~tgui-core/styles/components/Modal');
  @include meta.load-css(
    '~tgui-core/styles/components/NoticeBox.scss',
    $with: ('background-color': hsl(0, 55%, 18%))
  );
  @include meta.load-css(
    '~tgui-core/styles/components/NumberInput.scss',
    $with: ('border-color': hsl(0, 45%, 25%))
  );
  @include meta.load-css(
    '~tgui-core/styles/components/Tabs',
    $with: ('color-default': hsl(45, 80%, 70%))
  );
  @include meta.load-css('~tgui-core/styles/components/Section.scss');
  @include meta.load-css('~tgui-core/styles/components/Table.scss');
  @include meta.load-css(
    '~tgui-core/styles/components/Tooltip.scss',
    $with: ('background-color': hsl(0, 25%, 15%))
  );
  @include meta.load-css(
    '~tgui-core/styles/components/ProgressBar.scss',
    $with: (
      'color-default-fill': hsl(0, 65%, 40%),
      'background-color': rgba(20, 5, 5, 0.7)
    )
  );

  // Layouts
  @include meta.load-css('~tgui/styles/layouts/Layout.scss');
  @include meta.load-css('~tgui/styles/layouts/Window.scss');
  @include meta.load-css(
    '~tgui/styles/layouts/TitleBar.scss',
    $with: ('background-color': hsl(0, 55%, 18%))
  );

  .Button {
    text-shadow: 0 0 2px rgba(139, 0, 0, 0.8);

    &:hover {
      background-color: hsl(0, 55%, 25%);
      box-shadow: 0 0 8px rgba(139, 0, 0, 0.3);
      transition: all 0.2s ease;
    }

    &--selected {
      box-shadow: inset 0 0 6px rgba(139, 0, 0, 0.5);
    }
  }

  .Section {
    background-color: rgba(30, 5, 5, 0.4);

    &__title {
      color: hsl(45, 70%, 60%);
      text-shadow: 0 0 3px rgba(218, 165, 32, 0.6);
      border-bottom: 2px solid hsl(0, 40%, 25%);
    }
  }

  .Tab {
    &--selected {
      background-color: hsl(0, 50%, 20%);
      color: hsl(45, 80%, 70%);
      text-shadow: 0 0 2px rgba(218, 165, 32, 0.8);
    }

    &:hover:not(.Tab--selected) {
      background-color: hsl(0, 35%, 15%);
    }
  }

  .Input {
    background-color: hsl(0, 15%, 12%);
    color: hsl(0, 20%, 85%);
    border: 1px solid hsl(0, 35%, 20%);

    &:focus {
      border-color: hsl(0, 55%, 35%);
      box-shadow: 0 0 5px rgba(139, 0, 0, 0.4);
    }
  }

  // Custom scrollbar styling
  ::-webkit-scrollbar {
    width: 12px;
  }

  ::-webkit-scrollbar-track {
    background: hsl(0, 20%, 8%);
    border: 1px solid hsl(0, 30%, 15%);
  }

  ::-webkit-scrollbar-thumb {
    background: hsl(0, 45%, 25%);
    border: 1px solid hsl(0, 35%, 15%);
    border-radius: 2px;

    &:hover {
      background: hsl(0, 55%, 30%);
    }
  }

  .Layout__content {
    background-image: url('~tgui/assets/bg-vampire.png');
    text-shadow: 0 0 1px rgba(139, 0, 0, 0.3);
  }

  // Special styling for various UI elements
  .NoticeBox {
    border: 1px solid hsl(0, 50%, 25%);
    text-shadow: 0 0 2px rgba(139, 0, 0, 0.6);
  }

  .Modal {
    background-color: rgba(10, 0, 0, 0.9);
    border: 2px solid hsl(0, 50%, 25%);
    box-shadow: 0 0 20px rgba(139, 0, 0, 0.4);
  }

  // Highlight important elements with golden glow
  .color--good,
  .color__good {
    text-shadow: 0 0 3px rgba(218, 165, 32, 0.8);
  }

  // Enhance danger elements with red glow
  .color--bad,
  .color__bad,
  .color--danger,
  .color__danger {
    text-shadow: 0 0 3px rgba(220, 20, 60, 0.8);
  }
}
